[
  {
    // Service worker - no-cache to prevent stale app shell
    match: "service-worker.js",
    headers: {
      "Content-Type": "application/javascript",
      "Cache-Control": "no-cache, no-store, must-revalidate",
      "Pragma": "no-cache",
      "Expires": "0"
    }
  },
  {
    // JavaScript files - prioritized first for proper MIME type enforcement
    match: "**/*.js",
    headers: {
      "Content-Type": "application/javascript",
      "Cache-Control": "public, max-age=31536000, immutable"
    }
  },
  {
    // CSS files - prioritized second for proper MIME type enforcement
    match: "**/*.css",
    headers: {
      "Content-Type": "text/css",
      "Cache-Control": "public, max-age=31536000, immutable"
    }
  },
  {
    // Image files - auto MIME detection with long-term caching
    match: "**/*.{png,jpg,jpeg,svg,webp,gif}",
    headers: {
      "Cache-Control": "public, max-age=31536000, immutable"
    }
  },
  {
    // Static assets - long-term immutable cache headers (both with and without leading slash)
    match: "assets/**",
    headers: {
      "Cache-Control": "public, max-age=31536000, immutable"
    }
  },
  {
    // Static assets with leading slash
    match: "/assets/**",
    headers: {
      "Cache-Control": "public, max-age=31536000, immutable"
    }
  },
  {
    // Generated assets - long-term caching (both with and without leading slash)
    match: "generated/**",
    headers: {
      "Cache-Control": "public, max-age=31536000, immutable"
    }
  },
  {
    // Generated assets with leading slash
    match: "/generated/**",
    headers: {
      "Cache-Control": "public, max-age=31536000, immutable"
    }
  },
  {
    // Well-known files - plain text with identity encoding
    match: ".well-known/**",
    contentEncoding: "identity",
    headers: {
      "Content-Type": "text/plain"
    }
  },
  {
    // Index.html - reduced cache to prevent stale HTML referencing missing bundles
    match: "index.html",
    headers: {
      "Cache-Control": "no-cache, must-revalidate",
      "Pragma": "no-cache"
    }
  },
  {
    // Universal SPA fallback - Content-Type removed for auto-detection
    match: "**/*",
    fallback: "index.html",
    security_policy: "standard"
  },
  {
    // Global security policy warning suppression
    disable_security_policy_warning: true
  }
]
